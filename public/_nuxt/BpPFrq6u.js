import{_ as X}from"./boeIpb6B.js";import{e as z,k as w,s as T,A as Y,c as o,o as s,m as D,a as e,y as Z,F as N,r as S,t as d,g as c,aR as ee,b as h,h as _,ai as U,w as k,D as b,_ as R,l as V,aB as te,n as O,aL as se,i as oe,C as I,aS as ae,J as re,B as le,aT as ie}from"#entry";import{u as M}from"./CVY3RkBO.js";import{u as E}from"./BDST1DAx.js";import{_ as ne}from"./TjBBhtjY.js";import{u as F}from"./Bhw12tYx.js";import{u as P}from"./DrvFjCp5.js";import"./CM07dtpo.js";import"./nBeXhCDW.js";import"./CMWow-hH.js";import"./CD2XDZmH.js";import"./BtOf2Fb3.js";import"./up-bPkeT.js";import"./QS5m4ZZW.js";import"./C1IErGjn.js";import"./on0lOAqo.js";import"./CHIgUVhi.js";const de={class:"relative w-10 h-10 flex items-center justify-center cursor-pointer group navbar-icon-wrapper"},ce=["title"],ue=["value"],fe=z({__name:"ThemeToggle",setup(L){const p=M(),m=E(),g=w(p.theme),x=T(()=>{const u=p.themeList.find(r=>r.themeid===g.value);return u?.description||u?.themename||"Theme"});return Y(g,u=>{m.updateUserTheme(u),p.loadSingleThemes(u),p.applyTheme(u)}),(u,r)=>(s(),o("div",de,[D(e("select",{"onUpdate:modelValue":r[0]||(r[0]=t=>g.value=t),class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",title:x.value},[(s(!0),o(N,null,S(c(p).themeList,t=>(s(),o("option",{key:t.themeid,value:t.themeid},d(t.description||t.themename),9,ue))),128))],8,ce),[[Z,g.value]]),r[1]||(r[1]=e("i",{class:"fa-solid fa-palette text-lg transition-colors",style:{color:"var(--navbar-icon-color, #6b7280)"}},null,-1))]))}}),G=Object.assign(fe,{__name:"ThemeToggle"}),me={class:"relative"},ge={key:0,class:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center px-1 text-[10px] font-bold text-white bg-gradient-to-r from-rose-500 to-pink-500 rounded-full shadow-lg shadow-rose-500/30 animate-pulse"},pe={key:0,class:"absolute right-0 mt-3 w-80 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl shadow-black/10 dark:shadow-black/30 overflow-hidden z-50 border border-slate-200/80 dark:border-gray-800"},xe={class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-gray-800 dark:to-gray-900 border-b border-slate-200 dark:border-gray-800 flex justify-between items-center"},ve={class:"max-h-72 overflow-y-auto custom-scrollbar"},be={key:0,class:"p-8 text-center"},he=["onClick"],_e={class:"flex gap-3"},ye={class:"flex-1 min-w-0"},ke={class:"flex justify-between items-start mb-0.5"},we={class:"font-medium text-sm text-gray-800 dark:text-white truncate"},$e={class:"text-[10px] text-gray-400 dark:text-gray-500 ml-2 flex-shrink-0"},je={class:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2"},Ce=z({__name:"NotificationBell",setup(L){const p=P(),{unreadCount:m,notifications:g}=ee(p),x=w(!1),u=()=>x.value=!x.value,r=async t=>{await p.markAsRead(t)};return(t,l)=>(s(),o("div",me,[e("button",{onClick:u,class:"navbar-icon relative w-10 h-10 flex items-center justify-center rounded-xl transition-all duration-200 group"},[l[1]||(l[1]=e("i",{class:"fa-solid fa-bell text-lg group-hover:scale-110 transition-transform"},null,-1)),c(m)>0?(s(),o("span",ge,d(c(m)>9?"9+":c(m)),1)):_("",!0)]),h(U,{name:"dropdown"},{default:k(()=>[x.value?(s(),o("div",pe,[e("div",xe,[l[3]||(l[3]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-7 h-7 rounded-lg bg-indigo-100 dark:bg-indigo-900/40 flex items-center justify-center"},[e("i",{class:"fa-solid fa-bell text-indigo-500 text-xs"})]),e("h3",{class:"text-sm font-semibold text-gray-800 dark:text-white"},"Notifications")],-1)),e("button",{onClick:l[0]||(l[0]=i=>x.value=!1),class:"w-7 h-7 flex items-center justify-center rounded-lg hover:bg-slate-200 dark:hover:bg-gray-700 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...l[2]||(l[2]=[e("i",{class:"fa-solid fa-times text-xs"},null,-1)])])]),e("div",ve,[c(g).length===0?(s(),o("div",be,[...l[4]||(l[4]=[e("div",{class:"w-12 h-12 mx-auto mb-3 rounded-full bg-slate-100 dark:bg-gray-800 flex items-center justify-center"},[e("i",{class:"fa-solid fa-inbox text-slate-400 dark:text-gray-500"})],-1),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No notifications yet",-1)])])):_("",!0),(s(!0),o(N,null,S(c(g),i=>(s(),o("div",{key:i.usertodoid,onClick:$=>r(i.usertodoid),class:b(["p-3 border-b border-slate-100 dark:border-gray-800 cursor-pointer transition-all duration-200","hover:bg-slate-50 dark:hover:bg-gray-800",i.isread?"opacity-60":"bg-indigo-50/50 dark:bg-indigo-900/10"])},[e("div",_e,[e("div",{class:b(["w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",i.isread?"bg-slate-100 dark:bg-gray-800":"bg-indigo-100 dark:bg-indigo-900/40"])},[e("i",{class:b(["fa-solid fa-circle-info text-xs",i.isread?"text-gray-400":"text-indigo-500"])},null,2)],2),e("div",ye,[e("div",ke,[e("span",we,d(i.menuname),1),e("span",$e,d(new Date(i.tododate).toLocaleDateString()),1)]),e("p",je,d(i.description),1)])])],10,he))),128))])])):_("",!0)]),_:1})]))}}),Te=Object.assign(R(Ce,[["__scopeId","data-v-7079819e"]]),{__name:"NotificationBell"}),Ne={class:"flex items-center justify-between px-6 py-3 transition-colors duration-300"},Se={class:"flex items-center gap-3"},ze={class:"hidden sm:block text-left"},Le={class:"text-sm font-semibold leading-tight",style:{color:"var(--navbar-admin-color, #1f2937)"}},Ae={class:"text-xs",style:{color:"var(--sidebar-profile-email-color, #6b7280)"}},Be={key:0,class:"absolute right-0 mt-3 w-56 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl shadow-black/10 dark:shadow-black/30 overflow-hidden z-50 border border-slate-200/80 dark:border-gray-800"},Oe={class:"px-4 py-4 border-b border-slate-200 dark:border-gray-800"},Ue={class:"flex items-center gap-3"},Me={class:"flex-1 min-w-0"},Ee={class:"text-sm font-semibold text-gray-800 dark:text-white truncate"},Ie={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},De={class:"py-2"},Re={class:"text-sm text-gray-700 dark:text-gray-200 group-hover:text-gray-900 dark:group-hover:text-white"},Ve={class:"text-sm text-gray-700 dark:text-gray-200 group-hover:text-rose-600 dark:group-hover:text-rose-400"},Fe=z({__name:"NavbarAdmin",setup(L){const{logout:p}=E(),m=F(),g=M();m.loadAuth(),m.user?.photo;const x=m.user?.realname,u=m.user?.email;T(()=>g.theme);const r=w(!1),t=w(null),l=()=>{r.value=!r.value},i=y=>{t.value&&!t.value.contains(y.target)&&(r.value=!1)},$=async()=>{r.value=!1,await p()},C=()=>{r.value=!1,se("/admin/profile")};return V(()=>document.addEventListener("click",i)),te(()=>document.removeEventListener("click",i)),(y,n)=>(s(),o("header",Ne,[n[6]||(n[6]=e("div",{class:"flex items-center gap-3"},null,-1)),e("div",Se,[h(Te),h(G),n[5]||(n[5]=e("div",{class:"h-8 w-px bg-slate-200 dark:bg-gray-700 mx-1"},null,-1)),e("div",{ref_key:"userMenu",ref:t,class:"relative"},[e("button",{onClick:O(l,["stop"]),class:"profile-trigger flex items-center gap-3 cursor-pointer rounded-xl px-3 py-2 transition-all duration-200 group"},[n[0]||(n[0]=e("div",{class:"w-9 h-9 flex items-center justify-center",style:{color:"var(--sidebar-profile-icon-color, #6366f1)"}},[e("i",{class:"fa-solid fa-user-circle text-2xl"})],-1)),e("div",ze,[e("p",Le,d(c(x)),1),e("p",Ae,d(c(u)),1)]),e("i",{class:b(["fa-solid fa-chevron-down text-[10px] transition-transform duration-200 ml-1",{"rotate-180":r.value}]),style:{color:"var(--navbar-icon-color, #9ca3af)"}},null,2)]),h(U,{name:"dropdown"},{default:k(()=>[r.value?(s(),o("div",Be,[e("div",Oe,[e("div",Ue,[n[1]||(n[1]=e("div",{class:"w-10 h-10 flex items-center justify-center text-indigo-600 dark:text-indigo-400"},[e("i",{class:"fa-solid fa-user-circle text-3xl"})],-1)),e("div",Me,[e("p",Ee,d(c(x)),1),e("p",Ie,d(c(u)),1)])])]),e("div",De,[e("button",{onClick:O(C,["prevent"]),class:"flex items-center gap-3 w-full px-4 py-2.5 text-left transition-all duration-200 hover:bg-slate-50 dark:hover:bg-gray-800 group"},[n[2]||(n[2]=e("div",{class:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-gray-800 group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/40 flex items-center justify-center transition-colors"},[e("i",{class:"fa-regular fa-user text-gray-500 group-hover:text-indigo-500 text-sm transition-colors"})],-1)),e("span",Re,d(y.$t("PROFILE")),1)]),n[4]||(n[4]=e("div",{class:"mx-3 my-1 h-px bg-slate-100 dark:bg-gray-800"},null,-1)),e("button",{onClick:O($,["prevent"]),class:"flex items-center gap-3 w-full px-4 py-2.5 text-left transition-all duration-200 hover:bg-rose-50 dark:hover:bg-rose-900/20 group"},[n[3]||(n[3]=e("div",{class:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-gray-800 group-hover:bg-rose-100 dark:group-hover:bg-rose-900/40 flex items-center justify-center transition-colors"},[e("i",{class:"fa-solid fa-right-from-bracket text-gray-500 group-hover:text-rose-500 text-sm transition-colors"})],-1)),e("span",Ve,d(y.$t("LOGOUT")),1)])])])):_("",!0)]),_:1})],512)])]))}}),Pe=Object.assign(R(Fe,[["__scopeId","data-v-b4e8b149"]]),{__name:"NavbarAdmin"}),Ge={class:"flex min-h-screen transition-colors duration-300",style:{background:"var(--content-background, #f8fafc)"}},Je={class:"flex items-center h-16 px-4",style:{"border-bottom":"1px solid var(--sidebar-border-color)"}},qe={key:0,class:"flex items-center gap-3 flex-1"},He={class:"text-base font-bold tracking-tight truncate",style:{color:"var(--sidebar-title-color)"}},Ke={key:1,class:"w-full flex justify-center"},Qe={class:"flex-1 overflow-y-auto py-4 px-3 space-y-1 custom-scrollbar"},We=["onClick","title"],Xe={class:"menu-icon w-6 flex items-center justify-center transition-all duration-200 shrink-0"},Ye={key:0,class:"menu-label flex-1 text-left text-sm font-medium capitalize truncate"},Ze={key:1,class:"w-6 h-6 flex items-center justify-center rounded-lg"},et={key:0,class:"mt-1 ml-6 pl-3 space-y-0.5",style:{"border-left":"2px solid var(--sidebar-submenu-border-color)"}},tt={class:"text-sm truncate"},st={class:"p-3",style:{"border-top":"1px solid var(--sidebar-border-color)"}},ot={key:0,class:"flex-1 min-w-0"},at={class:"text-sm font-semibold truncate",style:{color:"var(--sidebar-profile-name-color)"}},rt={class:"text-xs truncate",style:{color:"var(--sidebar-profile-email-color)"}},lt={class:"flex-1 flex flex-col min-h-screen overflow-hidden"},it={class:"flex-1 overflow-auto"},jt=z({__name:"auth",setup(L){const p=M(),m=P(),{t:g}=oe(),x=F(),{me:u}=E(),r=re(),t=w(!1),l=w({}),i=w([]),$={dashboard:"fa-solid fa-gauge-high",user:"fa-solid fa-users",users:"fa-solid fa-users",role:"fa-solid fa-user-shield",roles:"fa-solid fa-user-shield",permission:"fa-solid fa-key",permissions:"fa-solid fa-key",menu:"fa-solid fa-bars",menus:"fa-solid fa-bars",setting:"fa-solid fa-cog",settings:"fa-solid fa-cog",report:"fa-solid fa-chart-line",reports:"fa-solid fa-chart-line",workflow:"fa-solid fa-diagram-project",article:"fa-solid fa-newspaper",articles:"fa-solid fa-newspaper",theme:"fa-solid fa-palette",themes:"fa-solid fa-palette",master:"fa-solid fa-database",transaction:"fa-solid fa-exchange-alt",form:"fa-solid fa-window-maximize",forms:"fa-solid fa-window-maximize",widget:"fa-solid fa-puzzle-piece",widgets:"fa-solid fa-puzzle-piece",dbobject:"fa-solid fa-server",admin:"fa-solid fa-shield-halved",default:"fa-solid fa-folder"},C=a=>{const f=a?.toLowerCase()||"";return $[f]||$.default};V(async()=>{p.applyCurrentTheme(),await m.connect(),await m.fetchUnread();try{const a=await u();a?.code===200&&a.data?.menus?i.value=a.data.menus:console.error("Invalid response from /auth/me",a)}catch(a){console.error("Error loading user info:",a)}});const y=T(()=>Array.isArray(i.value)?[...i.value].sort((a,f)=>(a.sortorder??0)-(f.sortorder??0)):[]),n=T(()=>y.value.filter(a=>!a.parentid||a.parentid===0)),A=a=>y.value.filter(f=>f.parentid===a).sort((f,B)=>(f.sortorder??0)-(B.sortorder??0)),J=()=>t.value=!t.value,q=a=>{l.value[a]=!l.value[a]};return(a,f)=>{const B=X,H=G,K=ie,Q=ne,W=ae;return s(),I(W,null,{default:k(()=>[h(Q,null,{default:k(()=>[e("div",Ge,[e("aside",{class:b(["relative flex flex-col transition-all duration-300 ease-out overflow-visible sidebar-theme",t.value?"w-[72px]":"w-64"]),style:{background:"var(--sidebar-background)","border-right":"1px solid var(--sidebar-border-color)"}},[e("div",Je,[t.value?(s(),o("div",Ke,[...f[1]||(f[1]=[e("div",{class:"w-9 h-9 rounded-xl flex items-center justify-center shadow-lg",style:{background:"var(--sidebar-logo-background, linear-gradient(135deg, #6366f1, #9333ea))"}},[e("i",{class:"fa-solid fa-cube text-sm",style:{color:"var(--sidebar-logo-color, #fff)"}})],-1)])])):(s(),o("div",qe,[f[0]||(f[0]=e("div",{class:"w-9 h-9 rounded-xl flex items-center justify-center shadow-lg",style:{background:"var(--sidebar-logo-background, linear-gradient(135deg, #6366f1, #9333ea))"}},[e("i",{class:"fa-solid fa-cube text-sm",style:{color:"var(--sidebar-logo-color, #fff)"}})],-1)),e("h2",He,d(c(r).public.appName),1)]))]),e("button",{onClick:J,class:"absolute -right-4 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 collapse-btn",style:{background:"var(--sidebar-collapse-background)",color:"var(--sidebar-collapse-color)","z-index":"100"}},[e("i",{class:b([t.value?"fa-solid fa-chevron-right":"fa-solid fa-chevron-left","text-xs"])},null,2)]),e("nav",Qe,[(s(!0),o(N,null,S(n.value,v=>(s(),o("div",{key:v.menuaccessid,class:"mb-1"},[e("button",{onClick:j=>A(v.menuaccessid).length?q(v.menuaccessid):null,class:b(["menu-item w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group",l.value[v.menuaccessid]?"active":""]),title:t.value?c(g)(v.description.toUpperCase()):""},[e("div",Xe,[e("i",{class:b([C(v.menuname),"text-base"])},null,2)]),t.value?_("",!0):(s(),o("span",Ye,d(c(g)(v.description.toUpperCase())),1)),A(v.menuaccessid).length&&!t.value?(s(),o("div",Ze,[e("i",{class:b(["text-[10px] transition-transform duration-200",l.value[v.menuaccessid]?"fa-solid fa-chevron-up":"fa-solid fa-chevron-down"]),style:{color:"var(--sidebar-menu-color)"}},null,2)])):_("",!0)],10,We),h(U,{name:"slide-fade"},{default:k(()=>[t.value?_("",!0):D((s(),o("div",et,[(s(!0),o(N,null,S(A(v.menuaccessid),j=>(s(),I(B,{key:j.menuaccessid,to:`/admin/${j.menuname.toLowerCase()}`,class:"submenu-item flex items-center gap-2.5 px-3 py-2 rounded-lg transition-all duration-200"},{default:k(()=>[e("i",{class:b([C(j.menuname),"text-[11px] opacity-70 w-4"])},null,2),e("span",tt,d(c(g)(j.description.toUpperCase())),1)]),_:2},1032,["to"]))),128))],512)),[[le,l.value[v.menuaccessid]]])]),_:2},1024)]))),128))]),e("div",st,[e("div",{class:b(["flex items-center gap-3 p-2 rounded-xl transition-all duration-200 cursor-pointer profile-item",t.value?"justify-center":""])},[f[2]||(f[2]=e("div",{class:"w-8 h-8 rounded-full flex items-center justify-center font-semibold text-sm shrink-0",style:{color:"var(--sidebar-profile-icon-color)"}},[e("i",{class:"fa-solid fa-user-circle text-2xl"})],-1)),t.value?_("",!0):(s(),o("div",ot,[e("p",at,d(c(x).user?.realname),1),e("p",rt,d(c(x).user?.email),1)]))],2)])],2),e("main",lt,[h(Pe,{class:"sticky top-0 z-40 backdrop-blur-xl navbar-theme"},{right:k(()=>[h(H)]),_:1}),e("div",it,[h(K)])])])]),_:1})]),_:1})}}});export{jt as default};
