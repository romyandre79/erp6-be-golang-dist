import{_ as g}from"./CGyzmy_M.js";import{u as y}from"./DmmRtUIM.js";import{y as _,r as h,a as v,z as w,B as n,ay as u,u as k,Y as l,ak as i,am as x}from"./DH2n3Tqk.js";import"#entry";/* empty css        */import"./KobTAp13.js";import"./BXI2M5or.js";import"./B3hjldT8.js";import"./C1AnPZyN.js";import"./Bu8C_CX3.js";const D=_({__name:"dashboard",setup(N){const{fetchWidgets:p}=y(),t=h(null);let a;const d=v(()=>{if(!t.value)return[];const e={};for(const r of t.value){const o=r.dashgroup||"";e[o]||(e[o]=[]),e[o].push(r)}for(const r in e)e[r].sort((o,s)=>(o.position??0)-(s.position??0));return Object.keys(e).sort((r,o)=>{const s=Number(r),m=Number(o);return!isNaN(s)&&!isNaN(m)?s-m:r.localeCompare(o)}).map(r=>({key:r,items:e[r]}))}),f=async()=>{try{if(a=await p("admin"),a?.code===200){t.value=a?.data.data;for(let e=0;e<t.value.length;e++){const c=t.value[e];t.value[e].widgetform=JSON.parse(c.widgetform),console.log("widg",t)}}else console.error("Invalid response from /auth/me",a)}catch(e){console.error("Error loading user info:",e)}};return w(async()=>{f()}),(e,c)=>(i(!0),n(l,null,u(k(d),r=>(i(),n("div",{key:r.key,class:"flex flex-row flex-nowrap gap-3 p-2"},[(i(!0),n(l,null,u(r.items,(o,s)=>(i(),n("div",{key:s,class:"flex-1 min-w-0 p-"},[x(g,{schema:o.widgetform,formType:"widget"},null,8,["schema"])]))),128))]))),128))}});export{D as default};
