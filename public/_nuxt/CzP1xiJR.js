import{_ as g}from"./C4H7ATx0.js";import{u as _}from"./R00H87SX.js";import{e as h,k as y,x as v,l as w,c as a,r as m,g as x,F as u,o as i,b as k}from"#entry";import"./CluOsRV0.js";import"./DFX9B2i2.js";import"./Stxcct-8.js";import"./acWDpS9X.js";import"./bU7HDp6y.js";import"./F2cpyflp.js";import"./BoNypvcG.js";const D=h({__name:"dashboard",setup(N){const{fetchWidgets:p}=_(),t=y(null);let n;const d=v(()=>{if(!t.value)return[];const e={};for(const o of t.value){const r=o.dashgroup||"";e[r]||(e[r]=[]),e[r].push(o)}for(const o in e)e[o].sort((r,s)=>(r.position??0)-(s.position??0));return Object.keys(e).sort((o,r)=>{const s=Number(o),l=Number(r);return!isNaN(s)&&!isNaN(l)?s-l:o.localeCompare(r)}).map(o=>({key:o,items:e[o]}))}),f=async()=>{try{if(n=await p("admin"),n?.code===200){t.value=n?.data.data;for(let e=0;e<t.value.length;e++){const c=t.value[e];t.value[e].widgetform=JSON.parse(c.widgetform),console.log("widg",t)}}else console.error("Invalid response from /auth/me",n)}catch(e){console.error("Error loading user info:",e)}};return w(async()=>{f()}),(e,c)=>(i(!0),a(u,null,m(x(d),o=>(i(),a("div",{key:o.key,class:"flex flex-row flex-nowrap gap-3 p-2"},[(i(!0),a(u,null,m(o.items,(r,s)=>(i(),a("div",{key:s,class:"flex-1 min-w-0 p-"},[k(g,{schema:r.widgetform,formType:"widget"},null,8,["schema"])]))),128))]))),128))}});export{D as default};
