import{I as h}from"#entry";import{u as d}from"./BJSp6O0t.js";const D=()=>{const o=h(),r=d();r.loadAuth();const i=r.token,s=t=>{const e={};return i&&(e.Authorization=`Bearer ${i}`),t instanceof FormData||(e["Content-Type"]="application/json"),e};return{get:async t=>await $fetch(t,{baseURL:o.public.apiBase,headers:s()}),post:async(t,e)=>await $fetch(t,{method:"POST",baseURL:o.public.apiBase,headers:s(e),body:e instanceof FormData?e:JSON.stringify(e)}),put:async(t,e)=>await $fetch(t,{method:"PUT",baseURL:o.public.apiBase,headers:s(e),body:e instanceof FormData?e:JSON.stringify(e)}),del:async t=>await $fetch(t,{method:"DELETE",baseURL:o.public.apiBase,headers:s()}),donlotFile:async(t,e,p)=>{try{const a=await fetch(`${o.public.apiBase}${t}`,{method:"POST",headers:s(e),body:e instanceof FormData?e:JSON.stringify(e)});if(!a.ok)throw new Error(`HTTP ${a.status}`);const f=await a.arrayBuffer(),l=new Blob([f]),c=URL.createObjectURL(l),u=a.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/["']/g,"")||p,n=document.createElement("a");n.href=c,n.download=u,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(c)}catch(a){console.error("Error saat download file:",a)}}}};export{D as u};
