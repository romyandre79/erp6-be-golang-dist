import{y as M,r as R,a as T,B as l,ak as d,an as u,aF as c,b5 as g,am as v,aN as y,al as m,u as j,b6 as P,aj as z,aM as I,$ as J,aL as L}from"./DH2n3Tqk.js";import{l as q,a as A}from"./DnqiU5Z1.js";import{s as F}from"./BXI2M5or.js";import"#entry";import"./B3hjldT8.js";import"./KobTAp13.js";/* empty css        */const U={key:0,class:"text-gray-700 font-semibold text-sm mb-2 select-none dark:text-white"},$={key:0,class:"text-xs text-gray-400 text-center italic py-2"},G=M({__name:"RenderNode",props:{node:{type:Object,required:!0},preview:{type:Boolean,default:!1},showJson:{type:Boolean,default:!1}},emits:["select","drop-child","delete"],setup(t,{emit:f}){const n=t,r=f,p=R(!1),x=q.map(o=>o.type),k=T(()=>(n.node.children||(n.node.children=[]),x.includes(n.node.type))),b=()=>r("select",n.node);F();const w=()=>p.value=!0,C=()=>p.value=!1,D=o=>o.preventDefault(),N=o=>{o.stopPropagation(),p.value=!1;const e=o.dataTransfer?.getData("component");if(e)try{const a=JSON.parse(e),s={id:Math.random().toString(36).substr(2,9),...a,children:a.children||[]};r("drop-child",[n.node.id,s])}catch(a){console.error("Invalid drop data",a)}},B=o=>{const e=o.added?.element;e&&r("drop-child",n.node.id,e)},V=()=>r("delete",n.node),E=()=>r("select",n.node),h={};A.forEach(o=>{h[o.type]=o.component});const O=o=>h[o]||"div",S=o=>{const e=o.props||{};switch(o.type){case"shorttext":case"number":case"hidden":case"password":case"email":case"text":return{...e,type:"text",disabled:!0,placeholder:e.key||"Enter text..."};case"longtext":return{...e,rows:3,placeholder:e.key||"Enter long text..."};case"button":const{label:a,...s}=e;return{...s,type:"button"};case"title":return{...e};case"boolean":case"bool":return{...e,type:"checkbox"};default:return{...e,class:"panel"}}};return(o,e)=>{const a=H;return d(),l("div",{class:g(["relative group transition-all duration-150",t.preview?"":"hover:border-blue-400 hover:shadow-sm"])},[t.preview?u("",!0):(d(),l("button",{key:0,class:"absolute top-1 right-1 text-xs bg-red-500 cursor-pointer text-white px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition z-10",onClick:c(V,["stop"])}," âœ– ")),k.value?(d(),l("div",{key:1,class:g(["flex relative border-2 border-dashed rounded p-3 mb-2 bg-white dark:bg-black dark:text-white transition-colors duration-150",p.value?"border-blue-400 bg-blue-50":"border-gray-300"]),onDragover:c(D,["prevent"]),onDragenter:c(w,["prevent"]),onDragleave:C,onDrop:N,onClick:c(b,["stop"])},[t.node.label?(d(),l("h4",U,y(t.node.type+": "+t.node.label),1)):u("",!0),v(j(P),{modelValue:t.node.children,"onUpdate:modelValue":e[3]||(e[3]=s=>t.node.children=s),group:"components","item-key":"id",disabled:t.preview,class:"space-y-2","ghost-class":"draggable-ghost","chosen-class":"hover-highlight",onChange:E,onAdd:B},{item:m(({element:s})=>[v(a,{node:s,preview:t.preview,onSelect:e[0]||(e[0]=i=>r("select",i)),onDropChild:e[1]||(e[1]=i=>r("drop-child",i)),onDelete:e[2]||(e[2]=i=>r("delete",i))},null,8,["node","preview"])]),footer:m(()=>[!t.node.children||t.node.children.length===0?(d(),l("div",$," Drop components here ")):u("",!0)]),_:1},8,["modelValue","disabled"])],34)):(d(),l("div",{key:2,class:"p-2 border rounded bg-white cursor-pointer hover:border-blue-400 dark:bg-black",onClick:c(b,["stop"]),draggable:"false"},[(d(),z(L(O(t.node.type)),J(S(t.node),{disabled:t.preview}),{default:m(()=>[I(y(t.node.type+":"+(t.node.props?.text||t.node.label)),1)]),_:1},16,["disabled"]))]))],2)}}}),H=Object.assign(G,{__name:"RenderNode"});export{H as default};
