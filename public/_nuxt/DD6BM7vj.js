import{u as p}from"./BJDXyoEI.js";import{y as v,r,B as f,ak as g,a_ as e,am as x,aM as y,al as w,b0 as u,b1 as m,aN as d,b4 as C,b5 as M,u as i}from"./DirAx5lA.js";import"./CoedoqIK.js";import"#entry";/* empty css        */import"./KobTAp13.js";import"./CHaV0QvJ.js";import"./DQ_kd7ue.js";const N={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl"},U={class:"space-y-4"},V={class:"flex justify-end gap-2 mt-4"},$=["disabled"],_=v({__name:"SendMessage",props:{users:{}},setup(k){const o=p(),n=r(!1),a=r(!1),t=r({receiverid:0,title:"",message:"",docno:""}),b=async()=>{if(!(!t.value.receiverid||!t.value.message)){n.value=!0;try{await o.sendMessage(t.value.receiverid,t.value.title||"Message",t.value.message,t.value.docno),a.value=!1,t.value={receiverid:0,title:"",message:"",docno:""}}catch(c){console.error(c)}finally{n.value=!1}}};return(c,s)=>{const S=C;return g(),f("div",null,[e("button",{onClick:s[0]||(s[0]=l=>a.value=!0),class:"btn btn-primary btn-sm gap-2"},[...s[6]||(s[6]=[e("i",{class:"fa fa-envelope"},null,-1),y(" Send Message ",-1)])]),x(S,{modelValue:a.value,"onUpdate:modelValue":s[5]||(s[5]=l=>a.value=l)},{default:w(()=>[e("div",N,[s[10]||(s[10]=e("h3",{class:"text-lg font-bold mb-4"},"Send Message",-1)),e("div",U,[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium mb-1"},"Receiver ID",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.receiverid=l),type:"number",class:"input input-bordered w-full",placeholder:"User ID"},null,512),[[m,t.value.receiverid,void 0,{number:!0}]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium mb-1"},"Title",-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.title=l),type:"text",class:"input input-bordered w-full",placeholder:"Subject"},null,512),[[m,t.value.title]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium mb-1"},"Message",-1)),u(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.message=l),class:"textarea textarea-bordered w-full",rows:"3",placeholder:"Type your message..."},null,512),[[m,t.value.message]])]),e("div",V,[e("button",{onClick:s[4]||(s[4]=l=>a.value=!1),class:"btn btn-ghost"},"Cancel"),e("button",{onClick:b,disabled:n.value,class:"btn btn-primary"},d(n.value?"Sending...":"Send"),9,$)])])])]),_:1},8,["modelValue"])])}}}),T=Object.assign(_,{__name:"SendMessage"}),B={class:"p-8"},D={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900 rounded"},F={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded"},j={class:"mt-2 text-xs"},W={class:"mb-6"},Y=v({__name:"notification-test",setup(k){const o=p(),n=async()=>{await o.fetchUnread(),console.log("Fetched notifications:",o.notifications)};return(a,t)=>(g(),f("div",B,[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold mb-4"},"Notification Test Page",-1)),e("div",D,[t[2]||(t[2]=e("h2",{class:"font-semibold mb-2"},"WebSocket Status",-1)),e("p",null,[t[1]||(t[1]=y("Connected: ",-1)),e("span",{class:M(i(o).connected?"text-green-600":"text-red-600")},d(i(o).connected?"Yes":"No"),3)]),e("p",null,"Unread Count: "+d(i(o).unreadCount),1),e("button",{onClick:t[0]||(t[0]=b=>i(o).connect()),class:"btn btn-sm btn-primary mt-2"},"Reconnect WS")]),e("div",F,[t[3]||(t[3]=e("h2",{class:"font-semibold mb-2"},"Fetch Notifications",-1)),e("button",{onClick:n,class:"btn btn-sm btn-secondary"},"Fetch Unread"),e("pre",j,d(JSON.stringify(i(o).notifications,null,2)),1)]),e("div",W,[x(T)]),t[5]||(t[5]=e("div",{class:"p-4 bg-yellow-50 dark:bg-yellow-900 rounded"},[e("h2",{class:"font-semibold mb-2"},"Console Logs"),e("p",{class:"text-sm"},"Check browser console (F12) for WebSocket connection logs")],-1))]))}});export{Y as default};
