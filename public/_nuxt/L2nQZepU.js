import{u as p}from"./DrvFjCp5.js";import{_ as S}from"./CR3KQr8q.js";import{e as v,k as d,c as f,o as g,a as e,b as x,d as y,w as C,m as u,v as m,t as r,D as M,g as i}from"#entry";import"./Bhw12tYx.js";import"./nBeXhCDW.js";import"./CMWow-hH.js";import"./CD2XDZmH.js";import"./BtOf2Fb3.js";import"./up-bPkeT.js";import"./C_kpcGSt.js";import"./on0lOAqo.js";import"./boeIpb6B.js";const N={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl"},U={class:"space-y-4"},V={class:"flex justify-end gap-2 mt-4"},$=["disabled"],_=v({__name:"SendMessage",props:{users:{}},setup(k){const o=p(),l=d(!1),a=d(!1),t=d({receiverid:0,title:"",message:"",docno:""}),b=async()=>{if(!(!t.value.receiverid||!t.value.message)){l.value=!0;try{await o.sendMessage(t.value.receiverid,t.value.title||"Message",t.value.message,t.value.docno),a.value=!1,t.value={receiverid:0,title:"",message:"",docno:""}}catch(c){console.error(c)}finally{l.value=!1}}};return(c,s)=>{const w=S;return g(),f("div",null,[e("button",{onClick:s[0]||(s[0]=n=>a.value=!0),class:"btn btn-primary btn-sm gap-2"},[...s[6]||(s[6]=[e("i",{class:"fa fa-envelope"},null,-1),y(" Send Message ",-1)])]),x(w,{modelValue:a.value,"onUpdate:modelValue":s[5]||(s[5]=n=>a.value=n)},{default:C(()=>[e("div",N,[s[10]||(s[10]=e("h3",{class:"text-lg font-bold mb-4"},"Send Message",-1)),e("div",U,[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium mb-1"},"Receiver ID",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.receiverid=n),type:"number",class:"input input-bordered w-full",placeholder:"User ID"},null,512),[[m,t.value.receiverid,void 0,{number:!0}]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium mb-1"},"Title",-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>t.value.title=n),type:"text",class:"input input-bordered w-full",placeholder:"Subject"},null,512),[[m,t.value.title]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium mb-1"},"Message",-1)),u(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=n=>t.value.message=n),class:"textarea textarea-bordered w-full",rows:"3",placeholder:"Type your message..."},null,512),[[m,t.value.message]])]),e("div",V,[e("button",{onClick:s[4]||(s[4]=n=>a.value=!1),class:"btn btn-ghost"},"Cancel"),e("button",{onClick:b,disabled:l.value,class:"btn btn-primary"},r(l.value?"Sending...":"Send"),9,$)])])])]),_:1},8,["modelValue"])])}}}),D=Object.assign(_,{__name:"SendMessage"}),T={class:"p-8"},F={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900 rounded"},j={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded"},B={class:"mt-2 text-xs"},W={class:"mb-6"},H=v({__name:"notification-test",setup(k){const o=p(),l=async()=>{await o.fetchUnread(),console.log("Fetched notifications:",o.notifications)};return(a,t)=>(g(),f("div",T,[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold mb-4"},"Notification Test Page",-1)),e("div",F,[t[2]||(t[2]=e("h2",{class:"font-semibold mb-2"},"WebSocket Status",-1)),e("p",null,[t[1]||(t[1]=y("Connected: ",-1)),e("span",{class:M(i(o).connected?"text-green-600":"text-red-600")},r(i(o).connected?"Yes":"No"),3)]),e("p",null,"Unread Count: "+r(i(o).unreadCount),1),e("button",{onClick:t[0]||(t[0]=b=>i(o).connect()),class:"btn btn-sm btn-primary mt-2"},"Reconnect WS")]),e("div",j,[t[3]||(t[3]=e("h2",{class:"font-semibold mb-2"},"Fetch Notifications",-1)),e("button",{onClick:l,class:"btn btn-sm btn-secondary"},"Fetch Unread"),e("pre",B,r(JSON.stringify(i(o).notifications,null,2)),1)]),e("div",W,[x(D)]),t[5]||(t[5]=e("div",{class:"p-4 bg-yellow-50 dark:bg-yellow-900 rounded"},[e("h2",{class:"font-semibold mb-2"},"Console Logs"),e("p",{class:"text-sm"},"Check browser console (F12) for WebSocket connection logs")],-1))]))}});export{H as default};
