import{S as v}from"./BtOf2Fb3.js";import{e as R}from"./nBeXhCDW.js";import{k as m,s as u,aA as k,e as p,aq as $,az as d,A as h,aF as w,b1 as T}from"#entry";function E(){const o=m(),c=u(()=>["#text","#comment"].includes(o.value?.$el.nodeName)?o.value?.$el.nextElementSibling:R(o));return{primitiveElement:o,currentElement:c}}const A="data-reka-collection-item";function P(o={}){const{key:c="",isProvider:M=!1}=o,f=`${c}CollectionProvider`;let e;if(M){const n=m(new Map);e={collectionRef:m(),itemMap:n},w(f,e)}else e=k(f);const y=(n=!1)=>{const t=e.collectionRef.value;if(!t)return[];const l=Array.from(t.querySelectorAll(`[${A}]`)),r=Array.from(e.itemMap.value.values()).sort((i,s)=>l.indexOf(i.ref)-l.indexOf(s.ref));return n?r:r.filter(i=>i.ref.dataset.disabled!=="")},C=p({name:"CollectionSlot",setup(n,{slots:t}){const{primitiveElement:l,currentElement:a}=E();return h(a,()=>{e.collectionRef.value=a.value}),()=>d(v,{ref:l},t)}}),S=p({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:t,attrs:l}){const{primitiveElement:a,currentElement:r}=E();return $(i=>{if(r.value){const s=T(r.value);e.itemMap.value.set(s,{ref:r.value,value:n.value}),i(()=>e.itemMap.value.delete(s))}}),()=>d(v,{...l,[A]:"",ref:a},t)}}),x=u(()=>Array.from(e.itemMap.value.values())),I=u(()=>e.itemMap.value.size);return{getItems:y,reactiveItems:x,itemMapSize:I,CollectionSlot:C,CollectionItem:S}}export{E as a,P as u};
