import{y as F,B as a,ak as n,a_ as r,Y as x,ay as w,b0 as f,b1 as $,bd as D,u as h,d as L,r as P,w as O,aN as g,aF as B,an as C,bc as A,a as E,b5 as j,am as U,b7 as W,b8 as q,aj as J}from"./DirAx5lA.js";import{u as I}from"./B1oK-9ok.js";import"#entry";/* empty css        */import"./KobTAp13.js";import"./CHaV0QvJ.js";import"./DQ_kd7ue.js";import"./mra8fcCZ.js";import"./CoedoqIK.js";const M=["onUpdate:modelValue"],z=["onUpdate:modelValue"],H=["onUpdate:modelValue","onChange"],K=["onClick"],Y=F({__name:"FlowParameter",setup(V){const d=I();function p(){d.parameters.push({wfparameterid:"",parametername:"",parametervalue:"",parametertype:"string"})}function s(i){d.parameters=d.parameters.filter(y=>y.wfparameterid!==i)}function v(i){if(i.type==="number"&&(i.value=Number(i.value)||0),i.type==="boolean"&&(i.value=i.value==="true"),i.type==="json")try{i.value=JSON.stringify(JSON.parse(i.value),null,2)}catch{i.value="{}"}}return(i,y)=>(n(),a("div",null,[y[1]||(y[1]=r("h3",{class:"font-semibold mb-3"},"Flow Parameters",-1)),r("button",{onClick:p,class:"px-3 py-1 bg-blue-500 text-white rounded mb-3"},"Add Parameter"),(n(!0),a(x,null,w(h(d).parameters,(b,k)=>(n(),a("div",{key:b.wfparameterid??k,class:"flex items-center gap-2 mb-2"},[f(r("input",{"onUpdate:modelValue":l=>b.parametername=l,placeholder:"param name (e.g. search)",class:"border p-2 rounded flex-1"},null,8,M),[[$,b.parametername]]),f(r("input",{"onUpdate:modelValue":l=>b.parametervalue=l,placeholder:"value",class:"border p-2 rounded flex-1"},null,8,z),[[$,b.parametervalue]]),f(r("select",{"onUpdate:modelValue":l=>b.parametertype=l,class:"border p-2 rounded w-32",onChange:l=>v(b)},[...y[0]||(y[0]=[r("option",{value:"string"},"string",-1),r("option",{value:"number"},"number",-1),r("option",{value:"boolean"},"boolean",-1),r("option",{value:"json"},"json",-1)])],40,H),[[D,b.parametertype]]),r("button",{onClick:l=>s(b.wfparameterid),class:"text-red-500 font-bold hover:text-red-700"},"âœ•",8,K)]))),128))]))}}),G=Object.assign(Y,{__name:"FlowParameter"}),Q={class:"space-y-4"},R={class:"flex items-center justify-between"},X={class:"text-lg font-semibold"},Z={key:0,class:"text-sm text-gray-500"},ee={class:"block text-sm font-medium text-gray-700"},te=["onUpdate:modelValue","placeholder","onInput"],oe=["onUpdate:modelValue","placeholder","onInput"],ne=["onUpdate:modelValue","onChange"],ae={key:0,value:""},re=["value"],se=["onUpdate:modelValue","onInput"],le={key:4,class:"text-xs text-gray-400"},ie=F({__name:"PropertyForm",props:{componentName:{type:String,required:!1},nodeId:{type:[String,Number],required:!1}},setup(V){const d=V,p=I(),s=L({}),v=P([]);function i(t,u=500){let e=null;return function(...o){clearTimeout(e),e=setTimeout(()=>t.apply(this,o),u)}}function y(t){return(t.inputtype??"").toLowerCase()==="textbox"}function b(t){return(t.inputtype??"").toLowerCase()==="textarea"}function k(t){return(t.inputtype??"").toLowerCase()==="combobox"||(t.inputtype??"").toLowerCase()==="select"}function l(t){const u=t.datasource;return!!(u&&u.length)}function _(t){return t?t.datasourcetype&&t.datasourcetype.toLowerCase()==="list"&&t.datasource?t.datasource.split(",").map(u=>u.trim()):Array.isArray(t.datasource)?t.datasource:[]:[]}function N(){v.value.sort((e,o)=>(Number(e.order)||0)-(Number(o.order)||0));let t={};const u=window.editor;if(u){const e=u.drawflow?.drawflow?.Home?.data,o=p.selectedNode;if(e&&o){const S=Object.keys(e).find(T=>Number(e[T].id)===Number(o.id));S&&e[S]?.data&&(t=e[S].data)}}v.value.forEach(e=>{const o=e.inputname;t&&Object.prototype.hasOwnProperty.call(t,o)?s[o]=t[o]:s[o]=e.componentvalue??""})}const m=i(()=>{const t={};v.value.forEach(u=>{t[u.inputname]=s[u.inputname]}),p.updateSelectedNodeData(t)},500);function c(t){m()}return O([()=>d.componentName,()=>d.nodeId],async([t,u])=>{if(!t){v.value=[],Object.keys(s).forEach(o=>delete s[o]);return}const e=await p.loadComponentProperties(t,u);v.value=e,N()},{immediate:!0}),O(()=>p.selectedNode,t=>{t&&N()},{deep:!0}),(t,u)=>(n(),a("div",Q,[r("div",R,[r("h3",X,g(V.componentName??"Properties"),1)]),v.value.length===0?(n(),a("div",Z,"No properties available for this component.")):(n(),a("form",{key:1,class:"space-y-3",onSubmit:u[0]||(u[0]=B(()=>{},["prevent"]))},[(n(!0),a(x,null,w(v.value,e=>(n(),a("div",{key:e.componentdetailid,class:"space-y-1"},[r("label",ee,g(e.lable??e.inputname),1),y(e)?f((n(),a("input",{key:0,"onUpdate:modelValue":o=>s[e.inputname]=o,placeholder:e.inputdesc||"",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300",onInput:o=>c()},null,40,te)),[[$,s[e.inputname]]]):b(e)?f((n(),a("textarea",{key:1,"onUpdate:modelValue":o=>s[e.inputname]=o,placeholder:e.inputdesc||"",rows:"4",class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300",onInput:o=>c()},null,40,oe)),[[$,s[e.inputname]]]):k(e)?f((n(),a("select",{key:2,"onUpdate:modelValue":o=>s[e.inputname]=o,class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300",onChange:o=>c()},[l(e)?C("",!0):(n(),a("option",ae,"-- select --")),(n(!0),a(x,null,w(_(e),o=>(n(),a("option",{key:o,value:o},g(o),9,re))),128))],40,ne)),[[D,s[e.inputname]]]):f((n(),a("input",{key:3,"onUpdate:modelValue":o=>s[e.inputname]=o,class:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300",onInput:o=>c()},null,40,se)),[[$,s[e.inputname]]]),e.inputdesc?(n(),a("p",le,g(e.inputdesc),1)):C("",!0)]))),128))],32))]))}}),ue=Object.assign(A(ie,[["__scopeId","data-v-29511cde"]]),{__name:"PropertyForm"}),de={class:"h-full flex flex-row bg-white text-gray-900 shadow-sm border-r"},ce={class:"panel w-12 flex flex-col items-center py-2 border-r border-gray-700 z-20"},pe=["onClick","title"],me={class:"w-80 flex flex-col bg-gray-50 border-r transition-all duration-300 ease-in-out"},be={class:"p-3 border-b bg-gray-100 flex justify-between items-center"},ve={class:"font-semibold text-sm uppercase text-gray-600"},ye={class:"flex-1 overflow-auto p-3"},_e={key:0},fe={class:"font-semibold text-xs text-gray-500 uppercase mb-2 tracking-wider"},he=["onDragstart"],ge={class:"truncate"},xe={key:1},we={key:2},ke={key:1,class:"text-gray-500 text-sm italic text-center mt-10"},Ne=F({__name:"WorkflowSidebar",setup(V){const d=I(),p=P("toolbox"),s=P(!0),v=[{id:"toolbox",label:"Toolbox",icon:"heroicons:squares-2x2"},{id:"parameter",label:"Parameters",icon:"heroicons:variable"},{id:"property",label:"Properties",icon:"heroicons:cog-6-tooth"}],i=E(()=>v.find(l=>l.id===p.value)?.label||"");function y(l){p.value===l?s.value=!s.value:(p.value=l,s.value=!0)}function b(l){return d.components.filter(_=>_?_.categoryname===l.categoryname:!1)}function k(l,_){l.dataTransfer?.setData("node",JSON.stringify(_))}return(l,_)=>{const N=W;return n(),a("div",de,[r("div",ce,[(n(),a(x,null,w(v,m=>r("button",{key:m.id,class:j(["p-3 mb-2 rounded hover:text-white transition-colors relative",{"text-white border-l-2 border-white bg-gray-700":p.value===m.id&&s.value}]),onClick:c=>y(m.id),title:m.label},[U(N,{name:m.icon,class:"w-6 h-6"},null,8,["name"])],10,pe)),64))]),f(r("div",me,[r("div",be,[r("span",ve,g(i.value),1),r("button",{onClick:_[0]||(_[0]=m=>s.value=!1),class:"text-gray-500 hover:text-gray-700"},[U(N,{name:"heroicons:x-mark",class:"w-4 h-4"})])]),r("div",ye,[p.value==="toolbox"?(n(),a("div",_e,[(n(!0),a(x,null,w(h(d).categories,m=>(n(),a("div",{key:m.id,class:"mb-4"},[r("div",fe,g(m.categoryname??m.label??m.name),1),r("div",null,[(n(!0),a(x,null,w(b(m),c=>(n(),a("div",{key:c.componentname??c.code??c.name,draggable:"true",onDragstart:t=>k(t,c),class:"p-2 bg-white border rounded mb-1 cursor-grab flex items-center gap-2 hover:border-blue-400 hover:shadow-sm transition-all text-sm"},[r("i",{class:j([c.componentclass??c.icon,"text-gray-600"])},null,2),r("span",ge,g(c.componenttitle??c.label??c.name),1)],40,he))),128))])]))),128))])):C("",!0),p.value==="parameter"?(n(),a("div",xe,[U(G)])):C("",!0),p.value==="property"?(n(),a("div",we,[h(d).selectedNode?(n(),J(ue,{key:0,componentName:h(d).selectedNode.name,nodeId:h(d).selectedNode.nodeid??h(d).selectedNode.id??h(d).selectedNode.data?.nodeid},null,8,["componentName","nodeId"])):(n(),a("div",ke,"Select a node to edit properties"))])):C("",!0)])],512),[[q,s.value]])])}}}),je=Object.assign(Ne,{__name:"WorkflowSidebar"});export{je as default};
