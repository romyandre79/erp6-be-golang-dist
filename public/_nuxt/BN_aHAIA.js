import{q as w,aR as y,k as l,l as S,aG as T,x as b}from"#entry";import{u as g}from"./BJSp6O0t.js";import{u as F}from"./Bs5g203e.js";const C=w("theme",()=>{const m=F(),t=y("theme",{default:()=>""}),d=l(t.value),n=l(null),r=l([]),u=g();async function i(){const a=new FormData,e=await m.post("auth/load-theme",a);r.value=e.data?.data||[]}const h=async a=>{const e=new FormData;e.append("flowname","getthemebyname"),e.append("menu","admin"),e.append("search","true"),e.append("themename",a);const p=await m.post("admin/execute-flow",e);n.value=p.data?.data||[]},f=async a=>{const e=new FormData;e.append("flowname","modiftheme"),e.append("themedata",a),e.append("themeid",n.value.themeid),e.append("themename",n.value.themename),e.append("createdby",n.value.createdby),e.append("description",n.value.description),e.append("recordstatus",n.value.recordstatus),e.append("menu","admin"),e.append("search","false"),await m.post("admin/execute-flow",e)},v=async()=>{o(t.value)},o=async a=>{await i();const e=r.value.find(c=>c.themeid===Number(a));if(!e)return;const p=typeof e.themedata=="string"?JSON.parse(e.themedata):e.themedata;for(const[c,s]of Object.entries(p))s!=null&&s!==""&&document.documentElement.style.setProperty(`--${c}`,String(s));d.value=a,t.value=a,document.documentElement.setAttribute("data-theme",a)};return S(async()=>{await u.loadAuth(),u.token?(t.value=u.user?.themeid,await i(),t.value&&o(t.value)):T("/login")}),b(d,(a,e)=>{a!==e&&o(a)}),{theme:d,themeCookie:t,themeData:n,themeList:r,applyTheme:o,applyCurrentTheme:v,loadThemes:i,loadSingleThemes:h,saveActiveTheme:f}});export{C as u};
