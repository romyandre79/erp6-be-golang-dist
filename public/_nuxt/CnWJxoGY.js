import{_ as g}from"./CTPo0qNU.js";import{u as _}from"./CSAbOUG4.js";import{e as h,k as y,s as v,l as w,c as a,r as p,g as k,F as l,o as i,b as x}from"#entry";import"./nBeXhCDW.js";import"./CMWow-hH.js";import"./CD2XDZmH.js";import"./BtOf2Fb3.js";import"./Cmh6H4GH.js";import"./C_kpcGSt.js";import"./QS5m4ZZW.js";import"./up-bPkeT.js";import"./on0lOAqo.js";import"./boeIpb6B.js";import"./CM07dtpo.js";import"./Bhw12tYx.js";import"./C1IErGjn.js";import"./CR3KQr8q.js";const V=h({__name:"dashboard",setup(N){const{fetchWidgets:u}=_(),t=y(null);let n;const d=v(()=>{if(!t.value)return[];const e={};for(const o of t.value){const r=o.dashgroup||"";e[r]||(e[r]=[]),e[r].push(o)}for(const o in e)e[o].sort((r,s)=>(r.position??0)-(s.position??0));return Object.keys(e).sort((o,r)=>{const s=Number(o),c=Number(r);return!isNaN(s)&&!isNaN(c)?s-c:o.localeCompare(r)}).map(o=>({key:o,items:e[o]}))}),f=async()=>{try{if(n=await u("admin"),n?.code===200){t.value=n?.data.data;for(let e=0;e<t.value.length;e++){const m=t.value[e];t.value[e].widgetform=JSON.parse(m.widgetform),console.log("widg",t)}}else console.error("Invalid response from /auth/me",n)}catch(e){console.error("Error loading user info:",e)}};return w(async()=>{f()}),(e,m)=>(i(!0),a(l,null,p(k(d),o=>(i(),a("div",{key:o.key,class:"flex flex-row flex-nowrap gap-3 p-2"},[(i(!0),a(l,null,p(o.items,(r,s)=>(i(),a("div",{key:s,class:"flex-1 min-w-0 p-"},[x(g,{schema:r.widgetform,formType:"widget"},null,8,["schema"])]))),128))]))),128))}});export{V as default};
