import{q as w,aR as y,k as l,l as S,aG as T,x as b}from"#entry";import{u as g}from"./ByQ18iMm.js";import{u as F}from"./BJSp6O0t.js";const C=w("theme",()=>{const m=g(),n=y("theme",{default:()=>""}),d=l(n.value),t=l(null),r=l([]),p=F(),u=async()=>{const a=new FormData;a.append("flowname","searchcombotheme"),a.append("menu","admin"),a.append("search","true");const e=await m.post("admin/execute-flow",a);r.value=e.data?.data||[]},h=async a=>{const e=new FormData;e.append("flowname","getthemebyname"),e.append("menu","admin"),e.append("search","true"),e.append("themename",a);const c=await m.post("admin/execute-flow",e);t.value=c.data?.data||[]},f=async a=>{const e=new FormData;e.append("flowname","modiftheme"),e.append("themedata",a),e.append("themeid",t.value.themeid),e.append("themename",t.value.themename),e.append("createdby",t.value.createdby),e.append("description",t.value.description),e.append("recordstatus",t.value.recordstatus),e.append("menu","admin"),e.append("search","false"),await m.post("admin/execute-flow",e)},v=async()=>{o(n.value)},o=async a=>{await u();const e=r.value.find(i=>i.themeid===a);if(!e)return;const c=typeof e.themedata=="string"?JSON.parse(e.themedata):e.themedata;for(const[i,s]of Object.entries(c))s!=null&&s!==""&&document.documentElement.style.setProperty(`--${i}`,String(s));d.value=a,n.value=a,document.documentElement.setAttribute("data-theme",a)};return S(async()=>{await p.loadAuth(),p.token?(n.value=p.user?.themeid,await u(),n.value&&o(n.value)):T("/login")}),b(d,(a,e)=>{a!==e&&o(a)}),{theme:d,themeData:t,themeList:r,applyTheme:o,applyCurrentTheme:v,loadThemes:u,loadSingleThemes:h,saveActiveTheme:f}});export{C as u};
