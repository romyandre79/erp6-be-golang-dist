import{_ as G}from"./acWDpS9X.js";import{e as M,k as y,x as C,B as H,c as n,o,a as e,m as j,h as f,z as J,F as O,r as A,t as i,g as c,s as Q,l as I,aC as q,b,n as L,I as k,aa as P,w as g,aM as K,_ as W,i as X,C as B,aP as Y,H as Z,aQ as ee,aR as te}from"#entry";import{_ as se}from"./qsF-ez8C.js";import{u as V}from"./F2cpyflp.js";import{u as U}from"./DfswW6MK.js";import{u as z}from"./DMb2TRSY.js";import"./CluOsRV0.js";import"./DFX9B2i2.js";import"./Stxcct-8.js";import"./BoNypvcG.js";import"./bU7HDp6y.js";const oe={class:"flex flex-col gap-2"},ae={class:"relative"},ne=["value"],le=M({__name:"ThemeToggle",setup(E){const d=U(),m=z(),p=y(d.theme),h=C(()=>{const r=d.themeList.find(s=>s.themeid===p.value);if(!r)return null;try{return JSON.parse(r.themedata||"{}")?.primary||null}catch{return null}});return H(p,r=>{m.updateUserTheme(r),d.loadSingleThemes(r),d.applyTheme(r)}),(r,s)=>(o(),n("div",oe,[e("div",ae,[j(e("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>p.value=l),class:"w-full px-3 py-2 rounded-lg border bg-base-200"},[(o(!0),n(O,null,A(c(d).themeList,l=>(o(),n("option",{key:l.themeid,value:l.themeid},i(l.description||l.themename),9,ne))),128))],512),[[J,p.value]]),h.value?(o(),n("div",{key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full border shadow",style:Q({backgroundColor:h.value})},null,4)):f("",!0)])]))}}),re=Object.assign(le,{__name:"ThemeToggle"}),ie={class:"navbar-admin flex items-center justify-between sticky top-0 z-1000 px-6 py-3 transition-colors duration-300 backdrop-blur-md"},ce={class:"flex items-center gap-4 relative"},ue=["src"],de={class:"hidden sm:block text-left leading-tight"},me={class:"text-sm font-semibold text-base-content"},pe={class:"text-xs"},_e={class:"px-4 py-3 border-b"},fe={class:"text-sm font-semibold"},he={class:"text-xs truncate"},ve={class:"divide-y"},xe=M({__name:"NavbarAdmin",setup(E){const{logout:d}=z(),m=V(),p=U();m.loadAuth();const h=m.user?.photo,r=m.user?.realname,s=m.user?.email,l=C(()=>p.theme),u=y(!1),v=y(null),$=()=>{u.value=!u.value},x=t=>{v.value&&!v.value.contains(t.target)&&(u.value=!1)},T=async()=>{u.value=!1,await d()},S=()=>{u.value=!1,K("/admin/profile")};return I(()=>document.addEventListener("click",x)),q(()=>document.removeEventListener("click",x)),(t,a)=>(o(),n("header",ie,[a[2]||(a[2]=e("div",{class:"flex items-center gap-3"},null,-1)),e("div",ce,[b(re),e("div",{ref_key:"userMenu",ref:v,class:"relative"},[e("button",{onClick:L($,["stop"]),class:"flex items-center gap-2 cursor-pointer hover:bg-base-200 rounded-xl px-3 py-2 transition-all"},[e("img",{src:c(h)||"/default-avatar.png",alt:"user avatar",class:"w-9 h-9 rounded-full border shadow-sm"},null,8,ue),e("div",de,[e("p",me,i(c(r)),1),e("p",pe,i(c(s)),1)]),e("i",{class:k(["fa-solid fa-chevron-down text-xs ml-1 text-gray-400 transition-transform duration-200",{"rotate-180":u.value}])},null,2)]),b(P,{name:"fade"},{default:g(()=>[u.value?(o(),n("div",{key:0,class:k(["absolute right-0 mt-2 w-56 border rounded-2xl shadow-2xl overflow-hidden z-50 backdrop-blur-sm transition-all",[l.value==="dark"?"bg-gray-900/90 border-gray-700":"bg-white/90 border-gray-200"]])},[e("div",_e,[e("p",fe,i(c(r)),1),e("p",he,i(c(s)),1)]),e("ul",ve,[e("li",null,[e("button",{onClick:L(S,["prevent"]),class:"flex items-center gap-2 px-4 py-2.5 text-sm w-full text-left transition-colors"},[a[0]||(a[0]=e("i",{class:"fa-regular fa-user w-5 text-primary"},null,-1)),e("span",null,i(t.$t("PROFILE")),1)])]),e("li",null,[e("button",{onClick:L(T,["prevent"]),class:"flex items-center gap-2 px-4 py-2.5 text-sm w-full text-left transition-colors text-red-500"},[a[1]||(a[1]=e("i",{class:"fa-solid fa-right-from-bracket w-5"},null,-1)),e("span",null,i(t.$t("LOGOUT")),1)])])])],2)):f("",!0)]),_:1})],512)])]))}}),ge=Object.assign(W(xe,[["__scopeId","data-v-d465ff24"]]),{__name:"NavbarAdmin"}),be={class:"flex min-h-screen transition-colors duration-300"},ye={class:"flex items-center justify-between p-4 border-b navbar-admin"},ke={key:0,class:"text-xl font-bold truncate"},we={class:"flex-1 overflow-y-auto mt-4 space-y-1 px-2"},Ce=["onClick"],$e={class:"flex items-center gap-2"},Te={key:0,class:"capitalize truncate"},Se={key:0,class:"ml-6 mt-1 space-y-1"},Ne={class:"text-sm truncate"},Le={class:"p-3 mt-auto border-t flex items-center gap-2"},Oe={key:0},Ae={class:"text-sm font-semibold"},Me={class:"text-xs opacity-70"},Ue={class:"flex-1 flex flex-col h-full min-h-screen"},ze={class:"transition-colors duration-300"},Je=M({__name:"auth",setup(E){const d=U(),{t:m}=X(),p=V(),{me:h}=z(),r=Z(),s=y(!1),l=y({}),u=y([]);I(async()=>{d.applyCurrentTheme();try{const t=await h();t?.code===200&&t.data?.menus?u.value=t.data.menus:console.error("Invalid response from /auth/me",t)}catch(t){console.error("Error loading user info:",t)}});const v=C(()=>Array.isArray(u.value)?[...u.value].sort((t,a)=>(t.sortorder??0)-(a.sortorder??0)):[]),$=C(()=>v.value.filter(t=>!t.parentid||t.parentid===0)),x=t=>v.value.filter(a=>a.parentid===t).sort((a,N)=>(a.sortorder??0)-(N.sortorder??0)),T=()=>s.value=!s.value,S=t=>{l.value[t]=!l.value[t]};return(t,a)=>{const N=G,D=te,F=se,R=Y;return o(),B(R,null,{default:g(()=>[b(F,null,{default:g(()=>[e("div",be,[e("aside",{class:k(["flex flex-col transition-all duration-300 border-r",s.value?"w-20":"w-64"])},[e("div",ye,[s.value?f("",!0):(o(),n("h2",ke,i(c(r).public.appName),1)),e("button",{onClick:T},[e("i",{class:k(s.value?"fa fa-chevron-right":"fa fa-chevron-left")},null,2)])]),e("nav",we,[(o(!0),n(O,null,A($.value,_=>(o(),n("div",{key:_.menuaccessid,class:"mb-1"},[e("button",{onClick:w=>x(_.menuaccessid).length?S(_.menuaccessid):null,class:"w-full flex items-center justify-between p-2 rounded-md transition-colors"},[e("div",$e,[s.value?f("",!0):(o(),n("span",Te,i(c(m)(_.description.toUpperCase())),1))]),x(_.menuaccessid).length&&!s.value?(o(),n("i",{key:0,class:k(["text-xs transition-transform",l.value[_.menuaccessid]?"fa fa-chevron-up":"fa fa-chevron-down"])},null,2)):f("",!0)],8,Ce),b(P,{name:"fade"},{default:g(()=>[s.value?f("",!0):j((o(),n("div",Se,[(o(!0),n(O,null,A(x(_.menuaccessid),w=>(o(),B(N,{key:w.menuaccessid,to:`/admin/${w.menuname.toLowerCase()}`,class:"flex items-center gap-2 p-2 rounded-md transition-colors","active-class":"font-semibold"},{default:g(()=>[e("span",Ne,i(c(m)(w.description.toUpperCase())),1)]),_:2},1032,["to"]))),128))],512)),[[ee,l.value[_.menuaccessid]]])]),_:2},1024)]))),128))]),e("div",Le,[s.value?f("",!0):(o(),n("div",Oe,[e("p",Ae,i(c(p).user?.realname),1),e("p",Me,i(c(p).user?.email),1)]))])],2),e("main",Ue,[b(ge,{class:"navbar-admin sticky top-0 z-50 shadow-md border-b"},{right:g(()=>[e("button",{onClick:a[0]||(a[0]=_=>c(d).toggleTheme()),class:"p-2 rounded-md transition-colors"})]),_:1}),e("div",ze,[b(D)])])])]),_:1})]),_:1})}}});export{Je as default};
